<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Kalikse.RecipeListPage"
             Title="Recipes"
             BackgroundImageSource="{AppThemeBinding Light=lightbackground.png, Dark=darkbackground.png}">

    <ContentPage.ToolbarItems>
        <ToolbarItem IconImageSource="burger_icon.png" Order="Primary" Priority="0" Clicked="OnToolbarItemClicked"/>
    </ContentPage.ToolbarItems>

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">
            <Label Text="Recommended Recipes" FontSize="24" FontAttributes="Bold" 
                   TextColor="{AppThemeBinding Light=#1A237E, Dark={StaticResource PrimaryColor}}"/>

            <CollectionView x:Name="RecipesCollection" SelectionMode="Single" SelectionChanged="OnRecipeSelected">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical" Span="2" HorizontalItemSpacing="10" VerticalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame CornerRadius="15" Padding="0" HasShadow="True" 
                               BackgroundColor="{AppThemeBinding Light={StaticResource CardBackgroundLight}, Dark={StaticResource CardBackgroundDark}}">
                            <Grid RowDefinitions="Auto,Auto,Auto" RowSpacing="5">
                                <Image Source="{Binding ImagePath}" Aspect="AspectFill" HeightRequest="150" Grid.Row="0"/>
                                <Label Text="{Binding Name}" FontSize="16" FontAttributes="Bold" 
                                       TextColor="{AppThemeBinding Light={StaticResource DarkText}, Dark={StaticResource LightText}}"
                                       Margin="10,10,10,0" Grid.Row="1"/>
                                <Label Text="{Binding PriceRange, StringFormat='â‚±{0}'}" FontSize="14" 
                                       TextColor="{AppThemeBinding Light={StaticResource DarkText}, Dark={StaticResource LightText}}"
                                       Margin="10,0,10,10" Grid.Row="2"/>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>